namespace = events_cey
normal_or_historical_nations = yes

#Breakdown of Vijayanagari-Jaffnan Relations
country_event = {
	id = events_cey.1
	title = "events_cey.1.tt"
	desc = "events_cey.1.dd"
	picture = ACCUSATION_eventPicture
	fire_only_once = yes

	trigger = {
		tag = VIJ
		JFN = {
			owns_core_province = 2100
			is_subject_of = VIJ
			NOT = {
				num_of_cities = 2
			}	
		}	
		is_year = 1448
		NOT = { is_year = 1465 }
		NOT = { has_country_flag = cey_has_annexed_jaffna }
	}

	mean_time_to_happen = {
		months = 36
	}
	
	
	option = { 
		name = "events_cey.1.a"	#How troublesome.
		JFN = {
			grant_independence = yes
		}
		if = {
			limit = {
				CEY = {
					exists = yes
					num_of_cities = 3
					is_neighbor_of = JFN
					NOT = {
						is_neighbor_of = VIJ
						war_with = JFN
					}	
				}
			}
			CEY = {
				country_event = { id = events_cey.2 }
			}	
		}	
	}	
}

#Breakdown of Vijayanagari-Jaffnan Relations (Kotte)
country_event = {
	id = events_cey.2
	title = "events_cey.2.tt"
	desc = "events_cey.2.dd"
	picture = SPY_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	fire_only_once = yes
	
	option = { 
		custom_tooltip = tooltip_cey.1 #This will risk the wrath of Vijayanagar and will likely lead to war with Jaffna.
		name = "events_cey.2.a"	#Send an ultimatum.
		ai_chance = {
			factor = 95
			modifier = {
				factor = 0.5
				is_in_war = yes
			}
		}			
		JFN = {
			country_event = { id = events_cey.3 }
		}	
	}
	option = { 
		name = "events_cey.2.b"	#Leave them for now.
			ai_chance = {
			factor = 5
			modifier = {
				factor = 5
				is_in_war = yes
			}
		}	
		add_prestige = -10	
	}	
}

#Kotte Demands Annexation (Jaffna)
country_event = {
	id = events_cey.3
	title = "events_cey.3.tt"
	desc = "events_cey.3.dd"
	picture = BORDER_TENSION_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.3.a"	#Reject demands.
		ai_chance = {
			factor = 95
			modifier = {
				factor = 0.5
				is_in_war = yes
			}
		}		
		CEY = {
			country_event = { id = events_cey.6 }
		}	
	}
	option = { 
		name = "events_cey.3.b"	#Accept demands.
		ai_chance = {
			factor = 5
			modifier = {
				factor = 5
				is_in_war = yes
			}
		}
		CEY = {
			country_event = { id = events_cey.5 }
		}		
	}	
}

#Kotte Invades Jaffna (Vijayanagar)
country_event = {
	id = events_cey.4
	title = "events_cey.4.tt"
	desc = "events_cey.4.dd"
	picture = REFORM_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.4.a"	#Attempt to intervene.
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_in_war = yes
			}
		}		
		JFN = {
			country_event = { id = events_cey.7 }
		}
	}
	option = { 
		name = "events_cey.4.b"	#There is nothing we could do.
		ai_chance = {
			factor = 80
			modifier = {
				factor = 5
				is_in_war = yes
			}
		}
		add_prestige = -10	
	}	
}

#Jaffna Concedes
country_event = {
	id = events_cey.5
	title = "events_cey.5.tt"
	desc = "events_cey.5.dd"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	option = { 
		name = "events_cey.5.a"	#Great.
		add_prestige = 10
		2100 = {
			cede_province = CEY
			add_core = CEY
		}
		hidden_effect = {
			set_country_flag = cey_has_annexed_jaffna
		}	
	}	
}

#Jaffna Refuses Demands
country_event = {
	id = events_cey.6
	title = "events_cey.6.tt"
	desc = "events_cey.6.dd"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.6.a"	#This means war.
		ai_chance = {
			factor = 95
			modifier = {
				factor = 0.5
				is_in_war = yes
			}
		}		
		JFN = {
			country_event = { id = events_cey.9 }
		}
	}	
	option = { 
		name = "events_cey.6.b"	#There is nothing we could do.
		ai_chance = {
			factor = 5
			modifier = {
				factor = 5
				is_in_war = yes
			}
		}
		add_prestige = -10	
		JFN = {
			country_event = { id = events_cey.10 }
		}		
	}	
}


#Vijayanagar Intervenes (Jaffna)
country_event = {
	id = events_cey.7
	title = "events_cey.7.tt"
	desc = "events_cey.7.dd"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.7.a"	#How splendid.
		CEY = {
			country_event = { id = events_cey.8 }
		}	
	}
}

#Vijayanagar Intervenes (Kotte)
country_event = {
	id = events_cey.8
	title = "events_cey.8.tt"
	desc = "events_cey.8.dd"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.8.a"	#End it now.
		add_prestige = -10
		JFN = {
			country_event = { id = events_cey.10 }
		}	
	}
	option = { 
		name = "events_cey.8.b"	#To arms!
		add_prestige = 10
		#In 1.30 this will add Vijayanagar as a defender.
	}	
}

#Kotte Invades
country_event = {
	id = events_cey.9
	title = "events_cey.9.tt"
	desc = "events_cey.9.dd"
	picture = HORDE_ON_HORSEBACK_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.9.a"	#Worrisome.
		if = {
			limit = {
				2100 = {
					owned_by = JFN
				}
			}	
			2100 = {
				add_claim = CEY
			}
		}	
		CEY = {
			declare_war_with_cb = {
				who = JFN
				casus_belli = cb_conquest
				war_goal_province = 2100
			}	
		}
		VIJ = {
			country_event = { id = events_cey.4 }
		}	
	}
}

#Kotte backs down
country_event = {
	id = events_cey.10
	title = "events_cey.10.tt"
	desc = "events_cey.10.dd"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes

	is_triggered_only = yes
	
	
	option = { 
		name = "events_cey.10.a"	#Great.
		if = {
			limit = {
				war_with = CEY
			}
			white_peace = CEY
		}	
	}	
}

#Jaffnan Revolt
country_event = {
	id = events_cey.11
	title = "events_cey.11.tt"
	desc = "events_cey.11.dd"
	picture = ANGRY_MOB_eventPicture
	fire_only_once = yes

	trigger = {
		tag = CEY
		is_subject = no
		had_country_flag = {
			flag = cey_has_annexed_jaffna
			days = 5475
		}
		NOT = { exists = JFN }
	}

	mean_time_to_happen = {
		months = 24
	}
	
	
	option = { 
		name = "events_cey.11.a"	#Squash the rebellion.
		2100 = {
			remove_core = ROOT
			add_core = JFN
			spawn_rebels = {
				type = nationalist_rebels
				size = 2
				culture = JFN
				religion = JFN
				friend = JFN
				win = yes
				unrest = 10
				leader = "Cinkaiariyan Kanakasooriya Aryachakravarti"
			}
		}
		every_neighbor_country = {
			country_event = { id = events_cey.12 }	
		}		
	}	
	option = { 
		name = "events_cey.11.b"	#Concede to their demands.
		2100 = {
			cede_province = JFN
			add_core = JFN
			remove_core = ROOT
		}
		add_truce_with = JFN	
		add_legitimacy = -10
		add_prestige = 10
	}
}

#Jaffnan Revolt (Informative)
country_event = {
	id = events_cey.12
	title = "events_cey.12.tt"
	desc = "events_cey.12.dd"
	picture = ANGRY_MOB_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	
	option = { 
		name = "events_cey.12.a"	#Ok.
	}	
}